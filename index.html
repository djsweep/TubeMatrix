<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TubeMatrix - Show</title>
  <link rel="stylesheet" href="css/app.css" />
</head>
<body class="tm-show">

  <!-- TOP BAR -->
  <div id="topbar">
    <div class="logo">TubeMatrix</div>

    <div class="top-actions">
      <button onclick="location.href='setup.html'">SETUP</button>
    </div>

    <div class="status">
      DDP: <span id="ddpStatusDot">●</span>
      <span id="ddpStatusText">Unknown</span>
    </div>
  </div>

  <!-- MAIN -->
  <div id="main">

    <!-- LEFT / CHANNEL A -->
    <div id="panel-left" class="panel">
      <div class="panel-head">
        <h3>CHANNEL A</h3>
      </div>

      <div class="module">
        <h4>Preset</h4>
        <div class="row">
          <select id="presetSelectA"></select>
          <button id="btnLoadPresetA" type="button">Load</button>
        </div>
        <div class="row">
          <button id="btnSavePresetA" type="button">Save as…</button>
        </div>
      </div>

      <div class="module">
        <h4>Color</h4>
        <div class="row">
          <input id="colorA" type="color" value="#ffffff" />
          <span id="colorALabel" class="muted">A</span>
        </div>
      </div>

      <!-- LINE (A) -->
      <div class="module">
        <h4>Line</h4>

        <div class="row" style="justify-content:space-between;">
          <span class="muted">Angle</span>
          <span id="aAngleLabel" class="muted">0°</span>
        </div>
        <input id="aAngle" type="range" min="-180" max="180" step="1" value="0" />

        <div class="row" style="justify-content:space-between; margin-top:10px;">
          <span class="muted">Thickness</span>
          <span id="aThickLabel" class="muted">8%</span>
        </div>
        <input id="aThick" type="range" min="1" max="50" step="1" value="8" />

        <div class="row" style="justify-content:space-between; margin-top:10px;">
          <span class="muted">Length</span>
          <span id="aLenLabel" class="muted">100%</span>
        </div>
        <input id="aLen" type="range" min="1" max="100" step="1" value="100" />
      </div>

      <div class="module">
        <h4>Shapes</h4>
        <div class="row">
          <button type="button" disabled>+ Circle</button>
          <button type="button" disabled>+ Rect</button>
        </div>
        <div class="row">
          <button type="button" disabled>+ Line</button>
          <button type="button" disabled>+ Wave</button>
        </div>
        <div class="muted">V1: zatím jen struktura (přidáme po routingu).</div>
      </div>
    </div>

    <!-- LIVE VIEW -->
    <div id="center-col">
      <div id="liveview-wrap">
        <canvas id="liveView"></canvas>
      </div>

      <div id="crossfade-bar">
        <span class="xfade-label">A</span>
        <input type="range" id="xfade" min="-100" max="100" step="1" value="0">
        <span class="xfade-label">B</span>
        <span id="xfadeValue" class="muted">0</span>
      </div>
    </div>

    <!-- RIGHT / CHANNEL B -->
    <div id="panel-right" class="panel">
      <div class="panel-head">
        <h3>CHANNEL B</h3>
      </div>

      <div class="module">
        <h4>Preset</h4>
        <div class="row">
          <select id="presetSelectB"></select>
          <button id="btnLoadPresetB" type="button">Load</button>
        </div>
        <div class="row">
          <button id="btnSavePresetB" type="button">Save as…</button>
        </div>
      </div>

      <div class="module">
        <h4>Color</h4>
        <div class="row">
          <input id="colorB" type="color" value="#ffffff" />
          <span id="colorBLabel" class="muted">B</span>
        </div>
      </div>

      <!-- LINE (B) -->
      <div class="module">
        <h4>Line</h4>

        <div class="row" style="justify-content:space-between;">
          <span class="muted">Angle</span>
          <span id="bAngleLabel" class="muted">90°</span>
        </div>
        <input id="bAngle" type="range" min="-180" max="180" step="1" value="90" />

        <div class="row" style="justify-content:space-between; margin-top:10px;">
          <span class="muted">Thickness</span>
          <span id="bThickLabel" class="muted">8%</span>
        </div>
        <input id="bThick" type="range" min="1" max="50" step="1" value="8" />

        <div class="row" style="justify-content:space-between; margin-top:10px;">
          <span class="muted">Length</span>
          <span id="bLenLabel" class="muted">100%</span>
        </div>
        <input id="bLen" type="range" min="1" max="100" step="1" value="100" />
      </div>

      <div class="module">
        <h4>Shapes</h4>
        <div class="row">
          <button type="button" disabled>+ Circle</button>
          <button type="button" disabled>+ Rect</button>
        </div>
        <div class="row">
          <button type="button" disabled>+ Line</button>
          <button type="button" disabled>+ Wave</button>
        </div>
        <div class="muted">V1: zatím jen struktura (přidáme po routingu).</div>
      </div>
    </div>

  </div>

  <div class="bottom-right muted">
    Output = mix(A,B) • LiveView = output
  </div>

  <!-- Scripts -->
  <script src="js/state.js"></script>
  <script src="js/derived.js"></script>
  <script src="js/liveview.js"></script>
  <script src="js/ddp_client.js"></script>
  <script type="module" src="js/show.js"></script>
</body>
</html>