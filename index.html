<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TubeMatrix - Show</title>
  <link rel="stylesheet" href="css/app.css" />
</head>
<body class="tm-show">

  <!-- TOP BAR -->
  <div id="topbar">
    <div class="logo">TubeMatrix</div>

    <div class="top-actions">
      <button onclick="location.href='fx.html'">FX</button>
      <button onclick="location.href='setup.html'">SETUP</button>
      
    </div>

    <div class="status">
      DDP: <span id="ddpStatusDot">●</span>
      <span id="ddpStatusText">Unknown</span>
    </div>
  </div>

  <!-- MAIN -->
  <div id="main">

    <!-- LEFT / CHANNEL A -->
    <div id="panel-left" class="panel">
      <div class="panel-head">
        <h3>CHANNEL A</h3>
      </div>

      <div class="module">
        <h4>Preset</h4>
        <div class="row">
          <select id="presetSelectA"></select>
          <button id="btnLoadPresetA" type="button">Load</button>
        </div>
        <div class="row">
          <button id="btnSavePresetA" type="button">Save as…</button>
        </div>
      </div>

      <div class="module">
        <h4>Color</h4>
        <div class="row">
          <input id="colorA" type="color" value="#ffffff" />
          <span id="colorALabel" class="muted">A</span>
        </div>
      </div>

      <!-- SHAPE UI (A) -->
<div id="shape-ui-a">

  <!-- LINE (A) -->
  <div id="ui-line-a">
    <div class="module">
      <h4>Line</h4>

      <div class="row" style="justify-content:space-between;">
        <span class="muted">Angle</span>
        <span id="aAngleLabel" class="muted">0°</span>
      </div>
      <input id="aAngle" type="range" min="-180" max="180" step="1" value="0" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Thickness</span>
        <span id="aThickLabel" class="muted">8%</span>
      </div>
      <input id="aThick" type="range" min="1" max="50" step="1" value="8" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Length</span>
        <span id="aLenLabel" class="muted">100%</span>
      </div>
      <input id="aLen" type="range" min="1" max="100" step="1" value="100" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Offset X</span>
        <span id="aOffXLabel" class="muted">0</span>
      </div>
      <input id="aOffX" type="range" min="-100" max="100" step="1" value="0" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Offset Y</span>
        <span id="aOffYLabel" class="muted">0</span>
      </div>
      <input id="aOffY" type="range" min="-100" max="100" step="1" value="0" />
    </div>
  </div>

  <!-- RECT (A) -->
  <div id="ui-rect-a" style="display:none;">
  <div class="module">
    <h4>Rect</h4>

    <div class="row" style="justify-content:space-between;">
      <span class="muted">Angle</span>
      <span id="aRectAngleLabel" class="muted">0°</span>
    </div>
    <input id="aRectAngle" type="range" min="-180" max="180" step="1" value="0" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Width</span>
      <span id="aRectWLabel" class="muted">60%</span>
    </div>
    <input id="aRectW" type="range" min="5" max="100" step="1" value="60" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Height</span>
      <span id="aRectHLabel" class="muted">60%</span>
    </div>
    <input id="aRectH" type="range" min="5" max="100" step="1" value="60" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Fill</span>
      <span id="aRectFillLabel" class="muted">100%</span>
    </div>
    <input id="aRectFill" type="range" min="0" max="100" step="1" value="100" />
  </div>
</div>
  <!-- CIRCLE (A) -->
  <div id="ui-circle-a" style="display:none;">
    <div class="module">
      <h4>Circle</h4>
      <div class="muted">Coming soon.</div>
    </div>
  </div>

  <!-- WAVE (A) -->
  <div id="ui-wave-a" style="display:none;">
    <div class="module">
      <h4>Wave</h4>
      <div class="muted">Coming soon.</div>
    </div>
  </div>

</div>

      <div class="module">
        <h4>Shapes</h4>
        <div class="row">
          <button id="btnAShapeCircle" type="button">Circle</button>
          <button id="btnAShapeRect" type="button">Rect</button>
        </div>
        <div class="row">
          <button id="btnAShapeLine" type="button">Line</button>
          <button id="btnAShapeWave" type="button">Wave</button>
        </div>
        <div class="muted">V1: zatím jen struktura (přidáme po routingu).</div>
      </div>
    </div>

    <!-- LIVE VIEW -->
    <div id="center-col">
      <div id="liveview-wrap">
        <canvas id="liveView"></canvas>
      </div>

      <div id="crossfade-bar">
        <span class="xfade-label">A</span>
        <input type="range" id="xfade" min="-100" max="100" step="1" value="0">
        <span class="xfade-label">B</span>
        <span id="xfadeValue" class="muted">0</span>
      </div>
      
      <div id="colorModeBar" class="module" style="margin-top:10px;">
  <div class="row" style="justify-content:center; gap:10px;">
    <span class="muted">Color mode</span>
    <select id="colorMode">
      <option value="solid">Solid</option>
      <option value="gradY">Gradient Y (top→bottom)</option>
      <option value="gradX">Gradient X (left→right)</option>
      <option value="palette">Palette (from /colors)</option>
    </select>
  </div>
</div>

<div id="paletteBar" class="module" style="margin-top:10px;">
  <div class="row" style="justify-content:center; gap:10px;">
    <span class="muted">Palette</span>
    <select id="paletteSelect"></select>
  </div>

  <div class="row" style="justify-content:center; gap:10px; margin-top:6px;">
    <span class="muted">Palette speed</span>
    <input id="paletteSpeed" type="range" min="0" max="100" step="1" value="15" style="max-width:220px;">
    <span id="paletteSpeedLabel" class="muted">15</span>
  </div>
</div>
    </div>
    <!-- RIGHT / CHANNEL B -->
    <div id="panel-right" class="panel">
      <div class="panel-head">
        <h3>CHANNEL B</h3>
      </div>

      <div class="module">
        <h4>Preset</h4>
        <div class="row">
          <select id="presetSelectB"></select>
          <button id="btnLoadPresetB" type="button">Load</button>
        </div>
        <div class="row">
          <button id="btnSavePresetB" type="button">Save as…</button>
        </div>
      </div>

      <div class="module">
        <h4>Color</h4>
        <div class="row">
          <input id="colorB" type="color" value="#ffffff" />
          <span id="colorBLabel" class="muted">B</span>
        </div>
      </div>

      <!-- SHAPE UI (B) -->
<div id="shape-ui-b">

  <!-- LINE (B) -->
  <div id="ui-line-b">
    <div class="module">
      <h4>Line</h4>

      <div class="row" style="justify-content:space-between;">
        <span class="muted">Angle</span>
        <span id="bAngleLabel" class="muted">90°</span>
      </div>
      <input id="bAngle" type="range" min="-180" max="180" step="1" value="90" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Thickness</span>
        <span id="bThickLabel" class="muted">8%</span>
      </div>
      <input id="bThick" type="range" min="1" max="50" step="1" value="8" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Length</span>
        <span id="bLenLabel" class="muted">100%</span>
      </div>
      <input id="bLen" type="range" min="1" max="100" step="1" value="100" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Offset X</span>
        <span id="bOffXLabel" class="muted">0</span>
      </div>
      <input id="bOffX" type="range" min="-100" max="100" step="1" value="0" />

      <div class="row" style="justify-content:space-between; margin-top:10px;">
        <span class="muted">Offset Y</span>
        <span id="bOffYLabel" class="muted">0</span>
      </div>
      <input id="bOffY" type="range" min="-100" max="100" step="1" value="0" />
    </div>
  </div>

  <!-- RECT (B) -->
  <div id="ui-rect-b" style="display:none;">
  <div class="module">
    <h4>Rect</h4>

    <div class="row" style="justify-content:space-between;">
      <span class="muted">Angle</span>
      <span id="bRectAngleLabel" class="muted">0°</span>
    </div>
    <input id="bRectAngle" type="range" min="-180" max="180" step="1" value="0" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Width</span>
      <span id="bRectWLabel" class="muted">60%</span>
    </div>
    <input id="bRectW" type="range" min="5" max="100" step="1" value="60" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Height</span>
      <span id="bRectHLabel" class="muted">60%</span>
    </div>
    <input id="bRectH" type="range" min="5" max="100" step="1" value="60" />

    <div class="row" style="justify-content:space-between; margin-top:10px;">
      <span class="muted">Fill</span>
      <span id="bRectFillLabel" class="muted">100%</span>
    </div>
    <input id="bRectFill" type="range" min="0" max="100" step="1" value="100" />
  </div>
</div>
  <!-- CIRCLE (B) -->
  <div id="ui-circle-b" style="display:none;">
    <div class="module">
      <h4>Circle</h4>
      <div class="muted">Coming soon.</div>
    </div>
  </div>

  <!-- WAVE (B) -->
  <div id="ui-wave-b" style="display:none;">
    <div class="module">
      <h4>Wave</h4>
      <div class="muted">Coming soon.</div>
    </div>
  </div>

</div>
<div class="module">
        <h4>Shapes</h4>
        <div class="row">
          <button id="btnBShapeCircle" type="button">Circle</button>
          <button id="btnBShapeRect" type="button">Rect</button>
        </div>
        <div class="row">
          <button id="btnBShapeLine" type="button">Line</button>
          <button id="btnBShapeWave" type="button">Wave</button>
        </div>
        <div class="muted">V1: zatím jen struktura (přidáme po routingu).</div>
      </div>
    </div>

  </div>

  <div class="bottom-right muted">
    Output = mix(A,B) • LiveView = output
  </div>

  <!-- Scripts -->
  <script src="./js/state.js"></script>
<script src="./js/derived.js"></script>
<script src="./js/liveview.js"></script>
<script src="./js/ddp_client.js"></script>

<script type="module" src="./js/show.js"></script>
</body>
</html>